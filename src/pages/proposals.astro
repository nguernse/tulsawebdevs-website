---
import Layout from '../layouts/Layout.astro';
import NewProposalButton from '../features/voting/NewProposalFormButton.tsx';
import ProposalList from '../features/voting/list/ProposalList.astro';
import { getProposals } from '../features/voting/services/proposal.ts';

const { cursor, proposals } = await getProposals();
---

<Layout title="Tulsa Web Devs">
  <main class="py-5">
    <div class="mx-auto max-w-[800px] bg-white rounded p-3">
      <div class="flex justify-between items-center mb-3">
        <h1 class="font-bold text-xl">Proposals</h1>

        <NewProposalButton client:load />
      </div>

      <ProposalList proposals={proposals} cursor={cursor} />
    </div>
  </main>
</Layout>
