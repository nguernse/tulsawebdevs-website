---
import Layout from '../layouts/Layout.astro';
import Card from '../components/Card.astro';



// Add a simple email validation function
function isValidEmail(email: string | null): boolean {
  // Just check if it contains '@'
  return !!email && email.includes('@');
}

// const host = import.meta.env.API_HOST;
// const pathname = '/proposals';

// if (!host) throw new Error('API_HOST environment variable not found');

// const action = new URL(pathname, host);
---

<Layout title="propose">
  <main>
    <img
      alt="Tulsa Web Devs logo"
      src="/twd-logo.svg"
      height="auto"
      width="100%"
    />

    <div class="flex flex-col items-center m-2" id="header">
      <h1 class="text-3xl max-md:text-2xl">Propose an idea!</h1>
      <h2 class="text-2xl max-md:text-xl">
        Have an idea?! Submit it! Just fill out this form!
      </h2>
    </div>

    <form method="POST" id="proposalForm" class="m-4">
      <div class="p-4 flex flex-col">
        <div id="name-fields" class="shrink p-2">
          <label for="name" class="text-l font-semibold">Name:</label>
          <input
            type="text"
            name="authorName"
            required
            minlength={6}
            placeholder="Enter your name, nickname, or alias..."
            class="rounded-small w-3/4 max-md:w-full text-yellow-200 placeholder-yellow-100"
          />
        </div>
        <div id="email-field" class="shrink p-2">
          <label for="email" class="text-l font-semibold">Email:</label>
          <input
            type="email"
            name="authorEmail"
            placeholder="myemailaddress@example.com..."
            class="rounded-small w-3/4 max-md:w-full text-yellow-200 placeholder-yellow-100"
          />
        </div>
      </div>

      <div class="p-4" id="topic-summary-fields">
        <label for="topic" class="text-l font-semibold">Topic:</label>
        <textarea
          id="topic"
          name="title"
          required
          minlength={6}
          class="rounded-sm w-full text-yellow-200 placeholder-yellow-100"
          placeholder="Topic title, framework name, main subject..."></textarea>
        <label for="summary" class="text-l font-semibold">Summary:</label>
        <textarea
          id="summary"
          name="summary"
          required
          minlength={6}
          rows={3}
          class="rounded-sm w-full text-yellow-200 placeholder-yellow-100"
          placeholder="Tell us about it..."
          maxlength="200"></textarea>

        <label for="description" class="text-l font-semibold"
          >Description:</label
        >
        <textarea
          id="description"
          name="description"
          minlength={6}
          rows={5}
          class="rounded-sm w-full text-yellow-200 placeholder-yellow-100"
          placeholder="Tell us more about it here..."
          maxlength="600"></textarea>
      </div>

      <div
        class="checkboxes border-t-4 border-b-4 flex items-center justify-start text-left m-5 p-4 gap-5"
        id="radio-buttons"
      >
        <input type="radio" id="project" name="type" value="project" />
        <label for="project" class="text-l font-semibold">
          {' '}
          Project!{' '}
        </label>
        <input type="radio" id="talk" name="type" value="talk" />
        <label for="talk" class="text-l font-semibold">
          {' Talk! '}
        </label>
        <input type="radio" id="lab" name="type" value="lab" />
        <label for="lab" class="text-l font-semibold">
          {' '}
          Lab!
        </label>
      </div>
      <button type="submit" class="bg-black text-white uppercase px-7 py-3">
        Submit
      </button>
    </form>
    <nav class="grid grid-cols-1 md:grid-cols-2 gap-2 m-2" id="footer-nav">
      <Card
        title="Vote on Topics and Projects"
        href="/vote"
        body="We want input from you on what we program!"
      />
      <Card
        title="Go Back!"
        href="/"
        body="Return to the home page to see what we're all about!"
      />
    </nav>
  </main>
</Layout>
